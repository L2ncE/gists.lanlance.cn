## 计算机图形学

>掌握计算机图形学的基本概念，理解光栅图形生成基本算法。理解三个常用直线生成算法，理解和掌握多边形的扫描转换、区域填充算法。掌握曲线的概念，曲线曲面的表示。掌握 Bezier 曲线、B 样条曲线、非均匀有理 B 样条曲线的定义和性质、算法。理解颜色的基本概念、三色学说、CIE 色度图、掌握常用的颜色模型，掌握光照相关知识，掌握几种基础光照模型，理解光线跟踪算法。熟悉 OpenGL 程序结构、基本几何元素、坐标变换和光照处理。

### 图形学概论

#### 图像 vs 图形

| 图像                    | 图形                       |
| ----------------------- | -------------------------- |
| 简单，相机，真实的      | 复杂，由算法生成，是合成的 |
| 表示：用像素阵列表示    | 表示：几何属性 + 物理属性  |
| 像素有颜色值 (或灰度值) | 需要人来设计和构造         |

#### 生成的图形

| 线框图     | 真实感图形 | 非真实感图形     |
| ---------- | ---------- | ---------------- |
| 用线条表示 | 侧重真实感 | 侧重艺术、风格化 |

#### 帧缓存

作用：存储将要显示的图形信息和保存中间数据。

包括：颜色缓存和深度缓存等。

显存与 GPU 的关系，就像内存和 CPU 的关系一样。

#### 图形学之父

I.E. Sutherland

### 二维集合变换

#### 概念

坐标系不动，把一个图形通过平移、旋转、缩放、对称、错切变换变成新的图形。

1. 对简单图形作变换和组合，可以构成复杂图形，是造型的方法之一。
2. 三维变换的基础。

#### 基本变换

##### 平移变换

![](https://picture.lanlance.cn/i/2023/12/25/65896f7c4d64e.png)

性质：只改变位置，不改变形状和大小。

##### 旋转变换

![](https://picture.lanlance.cn/i/2023/12/25/6589711ddb7ae.png)

性质：不改变大小、距离和角度，会改变朝向

##### 缩放变换

![](https://picture.lanlance.cn/i/2023/12/25/658983ce0cc11.png)

当 Sx == Sy 时为均匀缩放，反之为非均匀缩放。

性质：

![](https://picture.lanlance.cn/i/2023/12/25/658983e5d51b5.png)

##### 对称变换

关于 x 轴，y 轴，原点的对称变换是特殊的缩放变换。

![](https://picture.lanlance.cn/i/2023/12/25/658983f9b3b20.png)

##### 逆变换

正变换：从 P(x,y) 变到 P’(x’ ,y’)

逆变换：从 P’(x’ ,y’) 变回 P(x,y)

##### 复合变换

- 复合平移
- 复合旋转
- 先平移，再旋转，再缩放
- 先旋转，再平移，再缩放
- ...

性质：复合变换不满足可交换性

![](https://picture.lanlance.cn/i/2023/12/25/6589841611356.png)

#### 关于参考点旋转

![](https://picture.lanlance.cn/i/2023/12/25/6589841eebbe2.png)

相对某个参考点 (xr,yr) 的旋转变换：

(1) 作平移

(2) 作相对原点的旋转

(3) 作反平移

![](https://picture.lanlance.cn/i/2023/12/25/658984272c36f.png)

#### 矩阵乘向量

![](https://picture.lanlance.cn/i/2023/12/25/6589843273e98.png)

#### 齐次坐标

把 n 维空间的点表示成 n + 1 维空间的点，称前者为普通坐标，后者为齐次坐标。

##### 齐次坐标不唯一

(1,3,0) 的齐次坐标是 (2,6,0,2)、(1.5,4.5,0,1.5) —— 不唯一。

##### 普通坐标与齐次坐标的关系

![](https://picture.lanlance.cn/i/2023/12/25/6589843fd0a88.png)

##### 规范化齐次坐标

h=1 时的齐次坐标成为规范化齐次坐标。

![](https://picture.lanlance.cn/i/2023/12/25/658984523180b.png)

##### 矩阵乘向量

![](https://picture.lanlance.cn/i/2023/12/25/6589845876d54.png)

### 三维图形变换

坐标系不动，点动。

特点：
1. 比 2D 增加了 z 坐标
2. 比 2D 更复杂、更真实

三维几何变换性质：
- 平移——改变位置
- 旋转——改变方向
- 缩放——改变大小和形状
- 对称
- 错切

#### 平移变换

![](https://picture.lanlance.cn/i/2023/12/25/65898632cded3.png)

只改变位置，不改变大小和形状。

#### 旋转变换

##### 绕三个坐标轴的旋转

绕 z 轴旋转：约定人眼在 z 轴正方向，看向原点，逆时针为正方向

##### 绕三个坐标轴正方向旋转

![](https://picture.lanlance.cn/i/2023/12/25/6589876f90114.png)

##### 绕任意轴的旋转

eg.

![](https://picture.lanlance.cn/i/2023/12/25/658987e3adf0c.png)
#### 投影变换

数学上：从 n 维空间到 k(<n) 维空间的变换。
CG：从 3D 空间到 2D 平面的变换。

物体在 3D 空间，屏幕在 2D 平面，必须作投影变换。投影变换是 3D 图形学的核心。

##### 基本概念

![](https://picture.lanlance.cn/i/2023/12/25/6589897576820.png)

投影中心：相当于人眼或相机，也称视点或观察点
投影线：相当于光线
投影面：相当于成像平面，位于 COP 和物体之间
投影线与投影面相交，在投影面上的像就是物体的投影。

##### 光学成像 vs 虚拟成像

![](https://picture.lanlance.cn/i/2023/12/26/658a700da264a.png)

##### 透视投影 vs 平行投影

![](https://picture.lanlance.cn/i/2023/12/26/658a72005a81d.png)

透视投影：COP 到投影面的距离有限
平行投影：COP 到投影面的距离无限

平行投影是透视投影的极限

##### 平行投影

![](https://picture.lanlance.cn/i/2023/12/26/658a72c460024.png)

类比太阳光

###### 三视图

![](https://picture.lanlance.cn/i/2023/12/26/658a7301aa792.png)

性质：保持距离和角度不变，适用于建筑和施工图纸。

###### 三视图的变换公式

![](https://picture.lanlance.cn/i/2023/12/26/658a73ea168e0.png)

###### 正轴测投影

![](https://picture.lanlance.cn/i/2023/12/26/658a73a401bdc.png)

###### 缺点

物体投影的大小与物体离投影面的距离无关，与人的视觉不符。

##### 透视投影

符合人的视觉特点，远小近大，更真实

性质：平行于投影面的平行线投影后仍然平行。不平行于投影面的平行线投影后汇聚于一点。

###### 透视投影变换公式

![](https://picture.lanlance.cn/i/2023/12/26/658a747725a40.png)

#### 坐标系

##### 建模坐标系

1. 三维坐标系，坐标在 R 上取值
2. 目的：用来定义单个物体，比如球体，长方体，圆柱体。。。
3. 每个物体都可以有自己的建模坐标系。MC 是局部坐标系，如果物体改变，MC 也随之改变。

##### 世界坐标系

1. 三维坐标系，坐标在 R 上取值
2. 目的：定义所有对象，包括物体，观察者的位置和视线、投影平面等。
3. 是全局坐标系，其它坐标系都参照 WC 来定义。

##### 观察坐标系

1. 目的：从观察者的角度描述 WC 中的所有物体。
2. 类比照相：选择拍摄的位置和方向。
3. 对同一场景，在不同视点处的观察结果不同。

##### 投影面坐标系

![](https://picture.lanlance.cn/i/2023/12/26/658a77594ad9b.png)

##### 设备坐标系

1. 设备自带的坐标系。设备不同，设备坐标系也不同。
2. 二维坐标系，取离散值，比如 1024 * 768，1920 * 1080。

##### 规范化设备坐标系

1. 二维坐标系，在 0≤X≤1，0≤Y≤1 取连续值。
2. 目的：为了解决应用程序的可移植性的问题，使图形处理独立于具体的输出设备。
3. 虚拟的设备坐标系。


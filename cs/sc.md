## 安全

### 1. 什么是 JWT？主要用来做什么？

JWT：Json Web Token，是基于 Json 的一个公开规范，这个规范允许我们使用 JWT 在用户和服务器之间传递安全可靠的信息，他的两大使用场景是：认证和数据交换

### 2. JWT 由几部分组成？分别是什么？

一个 JWT 实际上就是一个字符串，它由三部分组成：头部、载荷与签名

### 3. JWT 校验 token 时，怎么保证数据并没有被黑客拦截并篡改？

signature 中有私钥来进行签名，可以保证安全性

### 4. Session + Cookie 实现

1. 客户端登录成功后，服务器会给每一台主机分配一个唯一的 session_id，用来区分他们，除了存入服务器的缓存，数据库或者内存中，还会把这个 session_id 返回给相应的主机，

2. 主机收到 session_id 后会存入 cookie 中，以后主机的每一次发送其他类型的请求的操作都会携带这个 session_id，

3. 服务器会将客户端发来的这个 session_id 和服务端查到的 session_id 进行对比，如果匹配，则返回给对应主机所需要的资源，否则拒绝

缺点

1. 因为服务器缓存 session_id，需要定期清理 session_id 表，

2. 不能识别跨域请求，

3. 在分布式(即多台服务器)的环境下，还得做 session 同步，一般不推荐，

### 5. JWT 的缺陷

1. 不安全的加密算法
   JWT 给开发者提供了很多的加密算法选择，其中就包括了已知的易受攻击的算法
2. 在 header 中包含了签名算法的种类
   攻击者只需要将 header 中的 alg 字段设置为 none 就可以绕过签名验证过程，在知道服务器使用非对称加密算法的情况下，修改 alg 为一个对称加密算法

### 6. Paseto 相比 JWT 的改变

- 不会向用户开放所有的加密算法
- header 中不再含有 alg 字段，也不会有 none 算法
- payload 使用加密算法，而不是简单的编码
